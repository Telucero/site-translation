<!doctype html><html lang="fr" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Learn how to resolve double reference issues of dependencies when customizing your Tanssi-powered network template with a Rust-based tool called Diener."><link rel="canonical" href="https://docs.tanssi.network/fr/builders/build/customize/adding-external-module/"><link rel="icon" href="/assets/images/tanssi-favicon.webp"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15"><title>Adding External Modules | Tanssi Docs</title><link rel="stylesheet" href="../../../../../assets/stylesheets/main.342714a4.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Epilogue:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><link rel="stylesheet" href="/assets/stylesheets/tanssi.3a7c7e.min.css"><link rel="stylesheet" href="/assets/stylesheets/termynal.44c03e.min.css"><link rel="stylesheet" href="/assets/stylesheets/timeline-neoteroi.1f115d.min.css"><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BT4KVVBH8F"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-BT4KVVBH8F",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-BT4KVVBH8F",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href="../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src="../../../../../assets/javascripts/glightbox.min.js"></script></head> <body dir="ltr"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#adding-external-module" class="md-skip"> Aller au contenu </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="En-tÃªte"> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class="logo-container"> <a href="https://docs.tanssi.network/" title="Tanssi Docs" class="md-header__button md-logo" aria-label="Tanssi Docs" data-md-component="logo"> <img src="/assets/images/tanssi-logo-white.webp" alt="logo"> </a> </div> <nav class="md-tabs" aria-label="Onglets" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item--custom" tabindex="0"> <span class="md-tabs__link"> <a href="https://www.tanssi.network/">Ã€ propos</a> </span> <ul class="md-tab__list"> <li class="md-tab__item"> <a href="https://www.tanssi.network/"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/.webp" alt="Ã€ propos de Tanssi" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Ã€ propos de Tanssi</span> </div> </a> </li> <li class="md-tab__item"> <a href="https://apps.tanssi.network/create"> <div class="icon-col"> <img class="dropdown-icon" src="/assets/images/dropdown-icons/tanssi-testnet.webp" alt="Tanssi TestNet" loading="lazy"> </div> <div class="text-col"> <span class="dropdown-title">Tanssi TestNet</span> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="md-header__buttons"> <div class="language-picker" data-md-component="language"> <button class="language-picker__toggle" type="button" aria-label="SÃ©lectionner la langue"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> <span class="language-picker__label">FR</span> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6z"/></svg> </button> <div class="language-picker__menu" role="menu"> <ul> <li> <a href="../../../../../builders/build/customize/adding-external-module/" hreflang="en" role="menuitem" class> <span class="language-code">EN</span> <span class="language-name">English</span> </a> </li> <li> <a href="../../../../../es/builders/build/customize/adding-external-module/" hreflang="es" role="menuitem" class> <span class="language-code">ES</span> <span class="language-name">EspaÃ±ol</span> </a> </li> <li> <a href="./" hreflang="fr" role="menuitem" class="is-active"> <span class="language-code">FR</span> <span class="language-name">FranÃ§ais</span> </a> </li> <li> <a href="../../../../../pt/builders/build/customize/adding-external-module/" hreflang="pt" role="menuitem" class> <span class="language-code">PT</span> <span class="language-name">PortuguÃªs</span> </a> </li> </ul> </div> </div> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class="md-search__options" aria-label="Recherche"> <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initialisation de la recherche </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../../../" title="Tanssi Docs" class="md-nav__button md-logo" aria-label="Tanssi Docs" data-md-component="logo"> <img src="/assets/images/tanssi-logo-white.webp" alt="logo"> </a> Tanssi Docs </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../../../" class="md-nav__link"> Documentation Multilingue (DÃ©mo) </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> Ã€ propos <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Ã€ propos </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="https://www.tanssi.network/" class="md-nav__link"> Ã€ propos de Tanssi </a> </li> <li class="md-nav__item"> <a href="https://apps.tanssi.network/create" class="md-nav__link"> Tanssi TestNet </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#introduction" class="md-nav__link"> <span class="md-ellipsis"> Introduction </span> </a> </li> <li class="md-nav__item"> <a href="#solving-dependencies-conflicts-diener" class="md-nav__link"> <span class="md-ellipsis"> Solving Dependencies Conflicts with Diener </span> </a> </li> <li class="md-nav__item"> <a href="#double-reference-issue" class="md-nav__link"> <span class="md-ellipsis"> Example of the Double Reference Issue </span> </a> <nav class="md-nav" aria-label="Example of the Double Reference Issue"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#add-third-party-dependency" class="md-nav__link"> <span class="md-ellipsis"> Add a Third-Party Dependency </span> </a> </li> <li class="md-nav__item"> <a href="#declaring-dependency" class="md-nav__link"> <span class="md-ellipsis"> Declaring the Dependency </span> </a> </li> <li class="md-nav__item"> <a href="#add-standard-features" class="md-nav__link"> <span class="md-ellipsis"> Make the Standard Features Available to the Compiler </span> </a> </li> <li class="md-nav__item"> <a href="#configure-module-in-the-runtime" class="md-nav__link"> <span class="md-ellipsis"> Configure and Add the Module to the Runtime </span> </a> </li> <li class="md-nav__item"> <a href="#compile-runtime" class="md-nav__link"> <span class="md-ellipsis"> Compile Runtime </span> </a> </li> <li class="md-nav__item"> <a href="#patch-dependencies" class="md-nav__link"> <span class="md-ellipsis"> Patch Dependencies </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div><div class="feedback-actions-container"><div class="feedback-section"> <form class="md-feedback" name="feedback" hidden> <fieldset> <legend class="md-feedback__title"> Was this page helpful? </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden> Thanks for your feedback! </div> <div data-md-value="0" hidden> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moondance-labs/tanssi-docs/issues/new/?title=[Feedback]+Adding%20External%20Modules+-+/fr/builders/build/customize/adding-external-module/" target="_blank" rel="noopener">additional feedback</a>. </div> </div> </div> </fieldset> <div class="divider"></div></form> </div><div class="edit-section"> <a href="https://github.com/moondance-labs/tanssi-docs/edit/main/en/builders/build/customize/adding-external-module.md" title="Editer cette page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg> Edit this page </a> </div> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset "> <h1 id="adding-external-module">Adding an External Module<a class="headerlink" href="#adding-external-module" title="Permanent link">&para;</a></h1> <h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2> <p>Developers building on top of the <a href="/builders/build/templates/" target="_blank">Templates offered by Tanssi</a> might want to add some external modules/dependencies into their runtime to expand certain functionality.</p> <p>The Tanssi repository and the templates take all the dependencies from <a href="https://github.com/moondance-labs/polkadot-sdk" target="_blank">a fork</a> of the official Polkadot SDK repository. This fork is maintained by the Tanssi engineering team, which usually contributes actively to Substrate development by fixing issues and enhancing functionalities, and, as a result, the fork repository frequently stays temporarily ahead of the official one.</p> <p>A double reference issue may arise when adding an external dependency, such as a pallet from a third party. This happens if a Tanssi module references a dependency from the Polkadot SDK fork repository, and the third party references the same dependency from the official Polkadot SDK repository. To solve this issue, the references to the dependencies must be unified.</p> <h2 id="solving-dependencies-conflicts-diener">Solving Dependencies Conflicts with Diener<a class="headerlink" href="#solving-dependencies-conflicts-diener" title="Permanent link">&para;</a></h2> <p>To efficiently handle the dependencies and their origins, you can check out the tool <a href="https://github.com/paritytech/diener" target="_blank">diener</a>.</p> <p>If the <code>diener</code> executable file, the cloned <a href="https://github.com/paritytech/polkadot-sdk" target="_blank">Polkadot SDK repository</a>, and your Tanssi fork are located in the same folder, step into the Tanssi fork folder and execute the following command:</p> <div class="highlight"><pre><span></span><code>../diener<span class="w"> </span>patch<span class="w"> </span>--crates-to-patch<span class="w"> </span>../polkadot-sdk<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>https://github.com/paritytech/polkadot-sdk<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--point-to-git<span class="w"> </span>https://github.com/moondance-labs/polkadot-sdk<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--point-to-git-branch<span class="w"> </span>tanssi-polkadot-stable2503
</code></pre></div> <p>This command applies the changes to the <code>Cargo.toml</code> file, patching the dependencies, and solving the double reference issues.</p> <p>You can visit the <a href="https://docs.rs/crate/diener/latest" target="_blank">diener documentation</a> to learn more about the tool and other extra functions it offers.</p> <h2 id="double-reference-issue">Example of the Double Reference Issue<a class="headerlink" href="#double-reference-issue" title="Permanent link">&para;</a></h2> <p>To illustrate the situation, the following steps add a demo <a href="https://github.com/papermoonio/pallet-toggle" target="_blank">external module</a> to a custom runtime based on the <a href="/builders/build/templates/substrate/" target="_blank">baseline Tanssi-powered network template</a>. One way to follow this tutorial is to clone the <a href="https://github.com/moondance-labs/tanssi" target="_blank">Tanssi Github repository</a>, which will act as the root repository of the project.</p> <p>This tutorial will generate a multiple reference compile-time error. Finally, the steps will show you how to fix the compile error by patching the dependencies with the tool <code>diener</code>, the runtime will compile successfully and work as intended.</p> <h3 id="add-third-party-dependency">Add a Third-Party Dependency<a class="headerlink" href="#add-third-party-dependency" title="Permanent link">&para;</a></h3> <p>Similarly to what is described in the <a href="/builders/build/customize/adding-built-in-module/#adding-a-built-in-module-to-runtime" target="_blank">built-in module</a> article, adding a third-party module requires the following steps:</p> <ol> <li>Declare the dependency in the root <code>Cargo.toml</code> file</li> <li>Make the standard features available to the compiler</li> <li>Configure and add the module to the runtime</li> </ol> <p>Should the third-party module reference any dependency already referenced from a distinct source or version, compilation will fail.</p> <p>The following diagram shows how two different references to the same dependency are being included in the runtime, causing the compilation to fail:</p> <p><a class="glightbox" href="/images/builders/build/external-module/external-module-1.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Double reference" src="/images/builders/build/external-module/external-module-1.webp"></a></p> <p>To resolve this issue, it will be necessary to apply a patch so that the references for the dependency are unified:</p> <p><a class="glightbox" href="/images/builders/build/external-module/external-module-2.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Patched reference" src="/images/builders/build/external-module/external-module-2.webp"></a></p> <h3 id="declaring-dependency">Declaring the Dependency<a class="headerlink" href="#declaring-dependency" title="Permanent link">&para;</a></h3> <p>The first step to reproduce the double reference issue is to declare the dependency in the <code>Cargo.toml</code> file located in the repository's root folder, under the section <code>[dependencies]</code>. For this example, a simple <a href="https://github.com/papermoonio/pallet-toggle" target="_blank">toggle module</a> is used.</p> <p>This <code>toggle</code> module, built for testing and educational purposes, adds basic logic to the runtime, allowing users to switch a state between true and false.</p> <div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="p">...</span>
<span class="n">pallet-toggle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/papermoonio/pallet-toggle&quot;</span><span class="err">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">default-features</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span>
<span class="err">}</span>
<span class="p">...</span>
</code></pre></div> <h3 id="add-standard-features">Make the Standard Features Available to the Compiler<a class="headerlink" href="#add-standard-features" title="Permanent link">&para;</a></h3> <p>Having declared the module in the workspace <code>Cargo.toml</code> file, the dependency can now be added to the specific template <code>Cargo.toml</code> file, which, for this example that uses the Tanssi GitHub repo, is located in the folder <code>container-chains/templates/simple/runtime</code>.</p> <div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="p">...</span>
<span class="n">pallet-toggle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="p">...</span>
</code></pre></div> <p>In the same <code>Cargo.toml</code> file, add the following features.</p> <div class="highlight"><pre><span></span><code><span class="k">[features]</span>
<span class="n">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;std&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="err">...,</span>
<span class="w">    </span><span class="s2">&quot;pallet-toggle/std&quot;</span><span class="err">,</span>
<span class="w">   </span><span class="p">...</span>
<span class="err">]</span>
<span class="p">...</span>
<span class="n">runtime-benchmarks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="err">...,</span>
<span class="w">    </span><span class="s2">&quot;pallet-toggle/runtime-benchmarks&quot;</span><span class="err">,</span>
<span class="err">]</span>

<span class="n">try-runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="err">...,</span>
<span class="w">    </span><span class="s2">&quot;pallet-toggle/try-runtime&quot;</span><span class="err">,</span>
<span class="err">]</span>
</code></pre></div> <h3 id="configure-module-in-the-runtime">Configure and Add the Module to the Runtime<a class="headerlink" href="#configure-module-in-the-runtime" title="Permanent link">&para;</a></h3> <p>Next, add the following snippet to the <code>lib.rs</code> file inside the runtime folder. This configures the module and adds the module within the <code>construct_runtime!</code> macro.</p> <div class="highlight"><pre><span></span><code><span class="o">..</span><span class="p">.</span>
<span class="k">impl</span><span class="w"> </span><span class="n">pallet_toggle</span><span class="p">::</span><span class="n">Config</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Runtime</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">type</span><span class="w"> </span><span class="nc">RuntimeEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RuntimeEvent</span><span class="p">;</span>
<span class="w">    </span><span class="k">type</span><span class="w"> </span><span class="nc">WeightInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pallet_toggle</span><span class="p">::</span><span class="n">weights</span><span class="p">::</span><span class="n">SubstrateWeight</span><span class="o">&lt;</span><span class="n">Runtime</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">construct_runtime</span><span class="o">!</span><span class="p">(</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nc">Runtime</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="o">..</span><span class="p">.</span>
<span class="w">        </span><span class="o">..</span><span class="p">.</span>
<span class="w">        </span><span class="n">Toggle</span><span class="p">:</span><span class="w"> </span><span class="nc">pallet_toggle</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">);</span>
</code></pre></div> <h3 id="compile-runtime">Compile Runtime<a class="headerlink" href="#compile-runtime" title="Permanent link">&para;</a></h3> <p>After completing the preceding steps, the module is declared a dependency in the project, configured, and added to the runtime.</p> <p>Compile the template using the following command:</p> <div class="highlight"><pre><span></span><code>cargo<span class="w"> </span>build<span class="w"> </span>-p<span class="w"> </span>container-chain-simple-node<span class="w"> </span>--release
</code></pre></div> <p>The terminal output will display an error, similar to the following, caused by different modules referencing different versions of the same dependency:</p> <div class="highlight"><pre><span></span><code>error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span><span class="k">select</span><span class="w"> </span>a<span class="w"> </span>version<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="sb">`</span>syn<span class="sb">`</span>.
</code></pre></div> <h3 id="patch-dependencies">Patch Dependencies<a class="headerlink" href="#patch-dependencies" title="Permanent link">&para;</a></h3> <p>Finally, executing the <code>diener</code> <a href="#solving-dependencies-conflicts-diener">command</a> will add a <code>patch</code> section to your workspace <code>Cargo.toml</code> file, overriding the dependencies and unifying origins and versions.</p> <p>This is what the execution in the terminal looks like:</p> <div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>../diener patch --crates-to-patch ../polkadot-sdk \ <br> --target https://github.com/paritytech/polkadot-sdk \ <br> --point-to-git https://github.com/moondance-labs/polkadot-sdk \ <br> --point-to-git-branch tanssi-polkadot-v1.3.0 </span> <span data-ty> <br> [2024-01-10T23:26:27Z INFO diener] Running diener v0.4.7 <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'bridge-runtime-common. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'bp-header-chain' <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'bp-runtime'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'frame-support. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'frame-support-procedural'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'frame-support-procedural-tools'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'frame-support-procedural-tools-derive'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-core-hashing'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-api'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-api-proc-macro' . <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-core'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-debug-derive'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-externalities'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-std'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-storage'. <br> [2024-01-10T23:26:42Z INFO diener::patch] Adding patch for 'sp-runtime-interface'. </span> </div> <p>As shown in the terminal output, <code>diener</code> adds a patch for the dependencies, creating a <code>patch</code> section in your <code>toml</code> overriding their origin:</p> <div class="highlight"><pre><span></span><code><span class="k">[patch.</span><span class="s2">&quot;https://github.com/paritytech/polkadot-sdk&quot;</span><span class="k">]</span>
<span class="n">bridge-runtime-common</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/moondance-labs/polkadot-sdk&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;tanssi-polkadot-v1.3.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">bp-header-chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/moondance-labs/polkadot-sdk&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;tanssi-polkadot-v1.3.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">bp-runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;https://github.com/moondance-labs/polkadot-sdk&quot;</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;tanssi-polkadot-v1.3.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">...</span>
</code></pre></div> <p>Finally, compiling will succeed, and the module will be built into your runtime.</p> <div class="md-source-file"> <small> <span class="source-file-label">DerniÃ¨re mise Ã  jour:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 4, 2025 19:43:35">November 4, 2025</span> <br> <span class="source-file-seperator">|</span> <span class="source-file-label">CrÃ©Ã©:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 4, 2025 19:43:35">November 4, 2025</span> </small> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="columns-llms-button"> <button class="md-button border copy-llms-btn" , title="Copier dans le presse-papier"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12z"/></svg> llms-full.txt </button> </div> <div class="md-social"> <a href="https://x.com/TanssiNetwork" target="_blank" rel="noopener" title="Twitter" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href="https://t.me/tanssiofficial" target="_blank" rel="noopener" title="Telegram" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg> </a> <a href="https://discord.com/invite/tanssi" target="_blank" rel="noopener" title="Discord" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href="https://www.linkedin.com/company/tanssi" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href="https://github.com/moondance-labs/tanssi" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href="https://www.youtube.com/@TanssiNetwork" target="_blank" rel="noopener" title="YouTube" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> </div> <div class="md-copyright"> <div class="md-copyright__highlight"> Â© 2025 Tanssi Foundation. All Rights Reserved. </div> <div class="network-links"> <a href="https://www.tanssi.network/privacy-policy" target="_blank">Privacy Policy</a> <a href="https://www.tanssi.network/terms-of-use" target="_blank">Terms of Use</a> </div> </div> <div class="papermoon"> <span>Made with ðŸ©µ by <a href="https://papermoon.io/" target="_blank">PaperMoon</a></span> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "content.code.copy", "content.action.edit"], "search": "../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script> <script src="../../../../../assets/javascripts/bundle.56ea9cef.min.js"></script> <script src="../../../../../assets/js/externalLinkModal.923284.min.js"></script> <script src="../../../../../assets/js/fixCreatedDate.055735.min.js"></script> <script src="../../../../../assets/js/clipboardCopy.961283.min.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const copyTxtFile = async (url) => {
        try {
            const response = await fetch(url);
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const text = await response.text();
            await navigator.clipboard.writeText(text);

            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.add('md-dialog--active');

              const copiedToClipboardMessage =
                copiedToClipboard.querySelector('.md-dialog__inner');
              if (
                copiedToClipboardMessage &&
                copiedToClipboardMessage.textContent !==
                  "CopiÃ© dans le presse-papier"
              ) {
                copiedToClipboardMessage.textContent =
                  "CopiÃ© dans le presse-papier";
              }
              // Set a timer to remove the after 2 seconds (2000ms)
              setTimeout(() => {
                copiedToClipboard.classList.remove('md-dialog--active');
              }, 2000);
            }
          } catch (err) {
            console.error('Failed to copy:', err);
            const copiedToClipboard = document.querySelector('.md-dialog');
            if (copiedToClipboard) {
              copiedToClipboard.classList.remove('md-dialog--active');
            }
          }
      }

      document.querySelectorAll('.llms').forEach(button => {
        button.addEventListener('click', (event) => {
          event.preventDefault(); // Prevent default link behavior

          const action = button.getAttribute('data-action');
          const fileName = button.getAttribute('data-value');
          if (!fileName) return; // Exit if no file name is found

          // Add 'llms-files/' prefix except for root-level llms.txt and llms-full.txt
          const filePath = (fileName === "llms.txt" || fileName === "llms-full.txt") 
            ? fileName 
            : `llms-files/${fileName}`;

          const url = `https://docs.tanssi.network/${filePath}`;

          if (action === 'copy') {
            copyTxtFile(url, fileName);
          }
        })
      })
    });
  </script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>